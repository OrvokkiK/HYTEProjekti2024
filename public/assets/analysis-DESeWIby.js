import"./style-igXz6p1K.js";import{f as p}from"./fetch-dnjvk_SN.js";import{s as g}from"./toast-B-6j1RQv.js";document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".menu-toggle"),t=document.querySelector(".menu"),o=document.querySelector(".logout a");e.addEventListener("click",function(){t.classList.toggle("show")}),o.addEventListener("click",function(a){a.preventDefault(),localStorage.removeItem("analysisModalShown"),localStorage.removeItem("user_id"),localStorage.removeItem("token"),g("Kirjaudutaan ulos."),setTimeout(()=>{window.location.href="index.html"},2e3)}),y()});am5.ready(function(){const e=am5.Root.new("graph2");e.setThemes([am5themes_Animated.new(e)]);const t=e.container.children.push(am5xy.XYChart.new(e,{panX:!1,panY:!1,wheelX:"panX",wheelY:"zoomX",paddingLeft:20,paddingRight:40,paddingBottom:50,layout:e.verticalLayout}));t.children.unshift(am5.Label.new(e,{text:"Stressitasoanalyysi",fontSize:20,fontWeight:"400",fontFamily:"Poppins, sans-serif",textAlign:"center",x:am5.percent(50),centerX:am5.percent(50),paddingTop:0,paddingBottom:20}));const o=localStorage.getItem("user_id"),a=localStorage.getItem("token"),r=`https://hyte24.northeurope.cloudapp.azure.com/api/analysis/user/${o}`,l={method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}};p(r,l).then(s=>{console.log(s);const n=s.map(d=>({date:new Date(d.created_at),value:d.analysis_enumerated})),c=am5xy.AxisRendererX.new(e,{minGridDistance:85,minorGridEnabled:!0}),u=t.xAxes.push(am5xy.CategoryAxis.new(e,{categoryField:"date",renderer:c}));c.grid.template.setAll({location:1}),c.labels.template.setAll({paddingTop:20}),u.data.setAll(n);const h=t.yAxes.push(am5xy.ValueAxis.new(e,{min:0,max:3,maxPrecision:0,renderer:am5xy.AxisRendererY.new(e,{strokeOpacity:.1})})),i=t.series.push(am5xy.ColumnSeries.new(e,{xAxis:u,yAxis:h,valueYField:"value",categoryXField:"date"}));i.columns.template.setAll({tooltipText:"{categoryX}: {valueY}",tooltipY:0,strokeOpacity:0,cornerRadiusTL:6,cornerRadiusTR:6}),i.columns.template.adapters.add("fill",function(d,m){return t.get("colors").getIndex(i.dataItems.indexOf(m.dataItem))}),i.data.setAll(n),i.appear(),t.appear(1e3,100),console.log(n)})});async function y(){const t=`https://hyte24.northeurope.cloudapp.azure.com/api/analysis/user/${localStorage.getItem("user_id")}`,a={method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}};p(t,a).then(r=>{x(r)})}function x(e){console.log(e);const t=document.querySelector(".tbody");t.innerHTML="",e.forEach(o=>{console.log(o.created_at,o.analysis_result,o.analysis_enumerated);const a=document.createElement("tr"),r=new Date(o.created_at).toLocaleDateString("fi-FI"),l=document.createElement("td");l.innerText=r;const s=document.createElement("td");s.innerText=o.analysis_result;const n=document.createElement("td");n.innerText=o.analysis_enumerated,a.appendChild(l),a.appendChild(s),a.appendChild(n),t.appendChild(a)})}
