import"./style-Bsiq0RZV.js";import{s as u}from"./toast-B-6j1RQv.js";import{f as m}from"./fetch-dnjvk_SN.js";document.addEventListener("DOMContentLoaded",function(){const n=document.querySelector(".menu-toggle"),t=document.querySelector(".menu");n.addEventListener("click",function(){t.classList.toggle("show")}),document.getElementById("userLoginBtn").addEventListener("click",function(){document.getElementById("userLoginForm").style.display="block",document.getElementById("professionalLoginForm").style.display="none"}),document.getElementById("professionalLoginBtn").addEventListener("click",function(){document.getElementById("userLoginForm").style.display="none",document.getElementById("professionalLoginForm").style.display="block"});const e=document.getElementById("userLoginForm");e.addEventListener("submit",function(r){if(r.preventDefault(),!e.checkValidity()){e.reportValidity();return}const i=r.target;p("https://hyte24.northeurope.cloudapp.azure.com/api/auth/login",i,"home.html")});const s=document.getElementById("professionalLoginForm");s.addEventListener("submit",function(r){if(r.preventDefault(),!s.checkValidity()){s.reportValidity();return}const i=r.target;g("https://hyte24.northeurope.cloudapp.azure.com/api/auth/professional/login",i,"professional.html")})});function p(n,t,e){a(n,t,e,!1)}function g(n,t,e){a(n,t,e,!0)}function a(n,t,e,s){u("Kirjaudutaan sisään...");const r=t.querySelector('input[type="text"]'),i=t.querySelector('input[type="password"]'),l={username:r.value,password:i.value},c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)};m(n,c).then(o=>{if(console.log(o),o.token){u("Kirjautuminen onnistui!"),localStorage.setItem("token",o.token),localStorage.setItem("name",o.user.family_name);const d=s?o.user.user_id:o.user_id;localStorage.setItem("user_id",d),setTimeout(()=>{window.location.href=e},1e3)}else u("Väärä salasana tai käyttäjätunnus.")}).catch(o=>{console.error("Login failed:",o),u("Kirjautuminen epäonnistui. Yritä uudelleen.")})}
