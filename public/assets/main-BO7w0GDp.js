import"./style-Bvx2onkj.js";import{s as l}from"./toast-B-6j1RQv.js";import{f as m}from"./fetch-dnjvk_SN.js";document.addEventListener("DOMContentLoaded",function(){const o=document.querySelector(".menu-toggle"),t=document.querySelector(".menu");o.addEventListener("click",function(){t.classList.toggle("show")}),document.getElementById("userLoginBtn").addEventListener("click",function(){document.getElementById("userLoginForm").style.display="block",document.getElementById("professionalLoginForm").style.display="none"}),document.getElementById("professionalLoginBtn").addEventListener("click",function(){document.getElementById("userLoginForm").style.display="none",document.getElementById("professionalLoginForm").style.display="block"});const e=document.getElementById("userLoginForm");e.addEventListener("submit",function(s){if(s.preventDefault(),!e.checkValidity()){e.reportValidity();return}const i=s.target;p("http://localhost:3000/api/auth/login",i,"home.html")});const r=document.getElementById("professionalLoginForm");r.addEventListener("submit",function(s){if(s.preventDefault(),!r.checkValidity()){r.reportValidity();return}const i=s.target;g("http://localhost:3000/api/auth/professional/login",i,"professional.html")})});function p(o,t,e){a(o,t,e,!1)}function g(o,t,e){a(o,t,e,!0)}function a(o,t,e,r){l("Kirjaudutaan sisään...");const s=t.querySelector('input[type="text"]'),i=t.querySelector('input[type="password"]'),u={username:s.value,password:i.value},c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)};m(o,c).then(n=>{if(console.log(n),n.token){l("Kirjautuminen onnistui!"),localStorage.setItem("token",n.token),localStorage.setItem("name",n.user.family_name);const d=r?n.user.user_id:n.user_id;localStorage.setItem("user_id",d),setTimeout(()=>{window.location.href=e},1e3)}else l("Väärä salasana tai käyttäjätunnus.")}).catch(n=>{console.error("Login failed:",n),l("Kirjautuminen epäonnistui. Yritä uudelleen.")})}
